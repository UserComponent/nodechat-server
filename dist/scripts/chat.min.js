!function(t,e){var s,r,n;return n=e(),t(function(){var e,h,i,o,a,c;return e=t(window),h=t("#nc-message-form"),i=t("#nc-message-compose"),o=new s("#nc-messages-container"),a=t(".ns-chat-toggle"),c=a.filter('[name="toggle-theme"]'),a.bootstrapSwitch(),e.on("resize",function(){return o.resize()}),n.on("chat-message",function(t){return o.addMessage(t)}).on("chat-enter",function(t){return o.addMessage(t+" entered","text-muted nc-chat-enter-text")}).on("chat-exit",function(t){return o.addMessage(t+" left","text-muted nc-chat-exit-text")}),e.add(i).bind("keyup","ctrl+shift+l",function(t){return o.clear()}),h.on("submit",function(t){var e;switch(t.preventDefault(),i.val()){case"":break;case"/clear":o.clear();break;case"/theme:light":case"/theme:dark":e=i.val().split(":")[1],r.set(e),c.bootstrapSwitch("state","dark"===e,!0);break;default:n.emit("chat-message",i.val())}return i.val("")}),c.on("switchChange.bootstrapSwitch",function(t,e){return e===!0?r.set("dark"):r.set("light")})}),r=function(){function e(){}return e.stylesheetElement=t("#nc-chat-stylesheet"),e.stylesheets={light:"/styles/chat-light.min.css",dark:"/styles/chat-dark.min.css"},e.set=function(t){var e;return null!=this.stylesheets[t]?(this.stylesheetElement.attr("href",this.stylesheets[t]),e=!0):(console.error("stylesheet not found: "+t),e=!1),e},e}(),s=function(){function e(e){this.elem=t(e),this.pusher=null,this.resize(),this.clear()}return e.prototype.resize=function(){var e;return e=t("#nc-message-form"),this.height=Math.ceil(e.offset().top)-16,this.height-=this.elem.offset().top,this.elem.css("height",this.height)},e.prototype.clear=function(){var e;return e=this.pusher,this.pusher=t(document.createElement("div")),this.pusher.addClass("nc-chat-buffer-pusher").height(this.height).appendTo(this.elem),this.scrollToBottom(),e?e.remove():void 0},e.prototype.addMessage=function(e,s){var r,n;return null==s&&(s=""),r=t(document.createElement("li")),n=e.author?e.author+": "+e.content:e,r.text(n).addClass(("nc-chat-message-item "+s).trim()).appendTo(this.elem),this.pusher&&this.pusher.height(Math.floor(this.pusher.height()-r.outerHeight(!0))),this.scrollToBottom()},e.prototype.scrollToBottom=function(){return this.elem.scrollTop(this.elem[0].scrollHeight)},e}()}(jQuery,io);