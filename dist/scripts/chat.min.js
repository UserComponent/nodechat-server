!function(e,t){var r,s;return s=t(),e(function(){var t,n,i,o;return t=e(window),n=e("#nc-message-form"),i=e("#nc-message-compose"),o=new r("#nc-messages-container"),t.on("resize",function(){return o.resize()}),s.on("chat-message",function(e){return o.addMessage(e)}).on("chat-enter",function(e){return o.addMessage(e+" entered","text-muted nc-chat-enter-text")}).on("chat-exit",function(e){return o.addMessage(e+" left","text-muted nc-chat-exit-text")}),t.add(i).bind("keyup","ctrl+shift+l",function(e){return o.clear()}),n.on("submit",function(e){switch(e.preventDefault(),i.val()){case"":break;case"/clear":o.clear();break;default:s.emit("chat-message",i.val())}return i.val("")})}),r=function(){function t(t){this.elem=e(t),this.pusher=null,this.resize(),this.clear()}return t.prototype.resize=function(){var t;return t=e("#nc-message-form"),this.height=Math.ceil(t.offset().top)-16,this.height-=this.elem.offset().top,this.elem.css("height",this.height)},t.prototype.clear=function(){var t;return t=this.pusher,this.pusher=e(document.createElement("div")),this.pusher.addClass("nc-chat-buffer-pusher").height(this.height).appendTo(this.elem),this.scrollToBottom(),t?t.remove():void 0},t.prototype.addMessage=function(t,r){var s,n;return null==r&&(r=""),s=e(document.createElement("li")),n=t.author?t.author+": "+t.content:t,s.text(n).addClass(("nc-chat-message-item "+r).trim()).appendTo(this.elem),this.pusher&&this.pusher.height(Math.floor(this.pusher.height()-s.outerHeight(!0))),this.scrollToBottom()},t.prototype.scrollToBottom=function(){return this.elem.scrollTop(this.elem[0].scrollHeight)},t}()}(jQuery,io);