!function(t,e){var s,n,r,h;return h=e(),t(function(){var e,n,i,o,a,c;return e=t(window),n=t("#nc-message-form"),i=t("#nc-message-compose"),o=new s("#nc-messages-container"),a=t(".ns-chat-toggle"),c=a.filter('[name="toggle-theme"]'),a.bootstrapSwitch(),e.on("resize",function(){return o.resize()}),h.on("chat-message",function(t){return o.addMessage(t)}).on("chat-enter",function(t){return o.addMessage(t+" entered","text-muted nc-chat-enter-text")}).on("chat-exit",function(t){return o.addMessage(t+" left","text-muted nc-chat-exit-text")}),e.add(i).bind("keyup","ctrl+shift+l",function(t){return o.clear()}),n.on("submit",function(t){var e;switch(t.preventDefault(),i.val()){case"":break;case"/clear":o.clear();break;case"/theme:light":case"/theme:dark":e=i.val().split(":")[1],r.set(e),c.bootstrapSwitch("state","dark"===e,!0);break;default:h.emit("chat-message",i.val())}return i.val("")}),c.on("switchChange.bootstrapSwitch",function(t,e){return e===!0?r.set("dark"):r.set("light")})}),n=function(){function t(){}return t.hyperlinkTLD=["com","us","ca","net","eu","tv","gov","org"],t.tagHyperlinks=function(t){var e;return e=new RegExp("(https?\\:\\/\\/)?((?:www)?\\S+\\.(?:"+this.hyperlinkTLD.join("|")+"))","gi"),t.replace(e,'<a href="http://$2" target="_blank">$1$2</a>')},t}(),r=function(){function e(){}return e.stylesheetElement=t("#nc-chat-stylesheet"),e.stylesheets={light:"/styles/chat-light.min.css",dark:"/styles/chat-dark.min.css"},e.set=function(t){var e;return null!=this.stylesheets[t]?(this.stylesheetElement.attr("href",this.stylesheets[t]),e=!0):(console.error("stylesheet not found: "+t),e=!1),e},e}(),s=function(){function e(e){this.elem=t(e),this.pusher=null,this.resize(),this.clear()}return e.prototype.resize=function(){var e;return e=t("#nc-message-form"),this.height=Math.ceil(e.offset().top)-16,this.height-=this.elem.offset().top,this.elem.css("height",this.height)},e.prototype.clear=function(){var e;return e=this.pusher,this.pusher=t(document.createElement("div")),this.pusher.addClass("nc-chat-buffer-pusher").height(this.height).appendTo(this.elem),this.scrollToBottom(),e?e.remove():void 0},e.prototype.addMessage=function(e,s){var r,h,i;return null==s&&(s=""),h=t(document.createElement("li")),i=e.author?e.author+": "+e.content:e,r=n.tagHyperlinks(i),h.addClass(("nc-chat-message-item "+s).trim()).html(r).appendTo(this.elem),this.pusher&&this.pusher.height(Math.floor(this.pusher.height()-h.outerHeight(!0))),this.scrollToBottom()},e.prototype.scrollToBottom=function(){return this.elem.scrollTop(this.elem[0].scrollHeight)},e}()}(jQuery,io);